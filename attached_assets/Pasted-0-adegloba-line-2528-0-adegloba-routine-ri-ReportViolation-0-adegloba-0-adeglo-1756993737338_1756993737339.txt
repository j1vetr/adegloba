0|adegloba |   line: '2528',
0|adegloba |   routine: 'ri_ReportViolation'
0|adegloba | }
0|adegloba | Push subscription error: error: insert or update on table "push_subscriptions" violates foreign key constraint "fk_push_subscriptions_user_id"
0|adegloba |     at /var/www/adegloba/node_modules/pg-pool/index.js:45:11
0|adegloba |     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0|adegloba |     at async file:///var/www/adegloba/node_modules/drizzle-orm/node-postgres/session.js:83:22
0|adegloba |     at async DatabaseStorage.createPushSubscription (file:///var/www/adegloba/dist/index.js:1981:27)
0|adegloba |     at async PushNotificationService.subscribeUser (file:///var/www/adegloba/dist/index.js:2749:11)
0|adegloba |     at async file:///var/www/adegloba/dist/index.js:5746:7 {
0|adegloba |   length: 304,
0|adegloba |   severity: 'ERROR',
0|adegloba |   code: '23503',
0|adegloba |   detail: 'Key (user_id)=(standalone-user) is not present in table "users".',
0|adegloba |   hint: undefined,
0|adegloba |   position: undefined,
0|adegloba |   internalPosition: undefined,
0|adegloba |   internalQuery: undefined,
0|adegloba |   where: undefined,
0|adegloba |   schema: 'public',
0|adegloba |   table: 'push_subscriptions',
0|adegloba |   column: undefined,
0|adegloba |   dataType: undefined,
0|adegloba |   constraint: 'fk_push_subscriptions_user_id',
0|adegloba |   file: 'ri_triggers.c',
0|adegloba |   line: '2528',
0|adegloba |   routine: 'ri_ReportViolation'
0|adegloba | }
0|adegloba | Error fetching coupons: TypeError: query.getSQL is not a function
0|adegloba |     at NodePgDatabase.execute (file:///var/www/adegloba/node_modules/drizzle-orm/pg-core/db.js:271:71)
0|adegloba |     at file:///var/www/adegloba/dist/index.js:5581:36
0|adegloba |     at Layer.handle [as handle_request] (/var/www/adegloba/node_modules/express/lib/router/layer.js:95:5)
0|adegloba |     at next (/var/www/adegloba/node_modules/express/lib/router/route.js:149:13)
0|adegloba |     at isAdminAuthenticated (file:///var/www/adegloba/dist/index.js:4100:14)
0|adegloba |     at Layer.handle [as handle_request] (/var/www/adegloba/node_modules/express/lib/router/layer.js:95:5)
0|adegloba |     at next (/var/www/adegloba/node_modules/express/lib/router/route.js:149:13)
0|adegloba |     at Route.dispatch (/var/www/adegloba/node_modules/express/lib/router/route.js:119:3)
0|adegloba |     at Layer.handle [as handle_request] (/var/www/adegloba/node_modules/express/lib/router/layer.js:95:5)
0|adegloba |     at /var/www/adegloba/node_modules/express/lib/router/index.js:284:15
0|adegloba | Error fetching coupons: TypeError: query.getSQL is not a function
0|adegloba |     at NodePgDatabase.execute (file:///var/www/adegloba/node_modules/drizzle-orm/pg-core/db.js:271:71)
0|adegloba |     at file:///var/www/adegloba/dist/index.js:5581:36
0|adegloba |     at Layer.handle [as handle_request] (/var/www/adegloba/node_modules/express/lib/router/layer.js:95:5)
0|adegloba |     at next (/var/www/adegloba/node_modules/express/lib/router/route.js:149:13)
0|adegloba |     at isAdminAuthenticated (file:///var/www/adegloba/dist/index.js:4100:14)
0|adegloba |     at Layer.handle [as handle_request] (/var/www/adegloba/node_modules/express/lib/router/layer.js:95:5)
0|adegloba |     at next (/var/www/adegloba/node_modules/express/lib/router/route.js:149:13)
0|adegloba |     at Route.dispatch (/var/www/adegloba/node_modules/express/lib/router/route.js:119:3)
0|adegloba |     at Layer.handle [as handle_request] (/var/www/adegloba/node_modules/express/lib/router/layer.js:95:5)
0|adegloba |     at /var/www/adegloba/node_modules/express/lib/router/index.js:284:15
